<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Secure Document Verification</title>
    <style>
        /* Modern Pro Tasarım */
        * { box-sizing: border-box; transition: all 0.3s ease; -webkit-tap-highlight-color: transparent; }
        
        body, html {
            margin: 0;
            padding: 0;
            height: 100%;
            width: 100%;
            font-family: 'Inter', 'Segoe UI', sans-serif;
            background: radial-gradient(circle at top right, #eef2f3, #8e9eab);
            overflow: hidden;
        }

        #loginScreen {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            padding: 20px;
        }

        .login-card {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            padding: 40px 30px;
            border-radius: 24px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.15);
            text-align: center;
            width: 100%;
            max-width: 400px;
            border: 1px solid rgba(255,255,255,0.4);
        }

        h2 { margin-bottom: 12px; color: #1a1a1a; font-size: 22px; font-weight: 700; }
        p { color: #666; font-size: 14px; margin-bottom: 25px; }

        input {
            width: 100%;
            padding: 16px;
            border: 2px solid #e0e0e0;
            border-radius: 14px;
            font-size: 16px;
            outline: none;
            text-align: center;
            margin-bottom: 20px;
            background: #fff;
        }

        input:focus { border-color: #007bff; box-shadow: 0 0 0 4px rgba(0,123,255,0.1); }

        .btn-main {
            width: 100%;
            padding: 16px;
            background: #007bff;
            color: white;
            border: none;
            border-radius: 14px;
            font-size: 16px;
            font-weight: 700;
            cursor: pointer;
        }

        #error { color: #dc3545; margin-top: 15px; display: none; font-size: 13px; font-weight: 600; }

        /* PDF Görüntüleme Ekranı */
        #pdf-screen { 
            display: none; 
            flex-direction: column; 
            height: 100vh; 
            width: 100vw; 
            background: #f4f4f9; 
            position: fixed;
            top: 0;
            left: 0;
        }

        .nav-bar { 
            background: #fff; 
            padding: 10px 20px; 
            display: flex; 
            align-items: center; 
            justify-content: space-between;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            z-index: 100;
        }

        .btn-nav {
            padding: 8px 15px;
            border-radius: 8px;
            font-size: 13px;
            font-weight: 600;
            cursor: pointer;
            border: none;
        }

        .btn-back { background: #f0f0f0; color: #333; }
        .btn-download { background: #28a745; color: white; }
        .btn-download:hover { background: #218838; }

        .iframe-container {
            flex-grow: 1;
            width: 100%;
            overflow: auto;
            -webkit-overflow-scrolling: touch;
        }

        iframe { width: 100%; height: 100%; border: none; }

        @media (max-width: 480px) {
            .nav-bar span { display: none; }
        }
    </style>
</head>
<body>

    <div id="loginScreen">
        <div class="login-card">
            <h2>Verify Document</h2>
            <p>Access your secure files by entering the Document ID below.</p>
            <input type="text" id="authInput" placeholder="Enter Document ID" autocomplete="off" spellcheck="false">
            <button class="btn-main" onclick="handleVerify()">VIEW DOCUMENT</button>
            <div id="error">Verification failed. ID not found.</div>
        </div>
    </div>

    <div id="pdf-screen">
        <div class="nav-bar">
            <button class="btn-nav btn-back" onclick="goBack()">← Exit</button>
            <span style="font-weight: 700; color: #333;">SECURE VIEWER</span>
            <button class="btn-nav btn-download" id="downloadBtn">Download PDF</button>
        </div>
        <div class="iframe-container">
            <iframe id="pdfFrame"></iframe>
        </div>
    </div>

    <script>
    // --- BELGE VERİTABANI ---
    // GitHub'da dosya ismini HSVUUAO4624KI58OB5EL.pdf yaptığın için burayı güncelledim.
    const documentDatabase = {
        "HSVUUAO4624KI58OB5EL": "HSVUUAO4624KI58OB5EL.pdf",
        "HSVUUAO4624KI580B5EL": "HSVUUAO4624KI58OB5EL.pdf", // Sıfır yazanları da yeni dosyaya yönlendirir
        "BELGE2026TESTKODU": "belge2.pdf"
    };

    function handleVerify(providedCode) {
        const inputVal = (providedCode || document.getElementById('authInput').value).trim().toUpperCase();
        const error = document.getElementById('error');
        const login = document.getElementById('loginScreen');
        const pdfView = document.getElementById('pdf-screen');
        const frame = document.getElementById('pdfFrame');

        if (documentDatabase.hasOwnProperty(inputVal)) {
            const fileName = documentDatabase[inputVal];

            login.style.display = 'none';
            pdfView.style.display = 'flex';
            frame.src = fileName; // Artık GitHub'daki yeni ismi çağırıyor

            // İndirme butonu: Dosya zaten kod ismiyle kayıtlı olduğu için direkt indirir
            document.getElementById('downloadBtn').onclick = function() {
                const link = document.createElement('a');
                link.href = fileName;
                link.download = inputVal + ".pdf"; 
                document.body.appendChild(link);
                link.click();
                document.body.removeChild(link);
            };

            error.style.display = 'none';
        } else {
            error.style.display = 'block';
            document.getElementById('authInput').style.borderColor = '#dc3545';
        }
    }

    document.getElementById('authInput').addEventListener("keypress", (e) => {
        if (e.key === "Enter") handleVerify();
    });

    function goBack() {
        window.location.hash = "";
        window.location.reload();
    }

    window.onload = () => {
        const hash = window.location.hash.substring(1).toUpperCase();
        if (hash && documentDatabase.hasOwnProperty(hash)) {
            document.getElementById('authInput').value = hash;
            handleVerify(hash);
        }
    };
    </script>
</body>
</html>
